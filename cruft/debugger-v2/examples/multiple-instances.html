<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugger V2 - Multiple Instances Example</title>

    <!-- Use v1 styles (compatible) -->
    <link rel="stylesheet" href="../../debugger/styles.css">
</head>
<body style="margin: 0; padding: 20px; font-family: 'Segoe UI', sans-serif; background: #1e1e1e; color: #d4d4d4;">
    <h1>Debugger V2 - Multiple Instances Example</h1>
    <p>This example demonstrates running two independent debugger instances on the same page.</p>

    <div style="display: flex; gap: 20px;">
        <!-- First debugger instance -->
        <div style="flex: 1;">
            <h2 style="color: #569cd6;">Debugger Instance 1 (Port 8888)</h2>
            <div id="debugger-1" style="border: 2px solid #569cd6; padding: 10px;">
                <div data-debugger-toolbar></div>
                <div data-debugger-tabs></div>
                <div data-debugger-console style="display: none;"></div>
            </div>
        </div>

        <!-- Second debugger instance -->
        <div style="flex: 1;">
            <h2 style="color: #4ec9b0;">Debugger Instance 2 (Port 9999)</h2>
            <div id="debugger-2" style="border: 2px solid #4ec9b0; padding: 10px;">
                <div data-debugger-toolbar></div>
                <div data-debugger-tabs></div>
                <div data-debugger-console style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- jQuery and jQuery UI (required) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

    <!-- Inspector client dependencies -->
    <script src="../../client/inspector-constants.js"></script>
    <script src="../../client/regex-pubsub.js"></script>
    <script src="../../client/inspector-browser-proxy.js"></script>
    <script src="../../client/inspector-controllers.js"></script>

    <!-- Main application (ES6 module) -->
    <script type="module">
        import { DebuggerApplication } from '../core/DebuggerApplication.js';

        $(document).ready(async function() {
            console.log('Initializing Multiple Debugger Instances');

            // Create first debugger instance
            const app1 = new DebuggerApplication({
                container: '#debugger-1',
                wsUrl: 'ws://localhost:8888',
                options: {
                    instanceId: 'debugger-instance-1'
                }
            });

            // Create second debugger instance
            const app2 = new DebuggerApplication({
                container: '#debugger-2',
                wsUrl: 'ws://localhost:9999',
                options: {
                    instanceId: 'debugger-instance-2'
                }
            });

            // Initialize both instances
            await Promise.all([
                app1.initialize(),
                app2.initialize()
            ]);

            // Expose globally for debugging
            window.debuggerApp1 = app1;
            window.debuggerApp2 = app2;

            console.log('Both debugger instances initialized!');
            console.log('Instance 1:', app1.instanceId);
            console.log('Instance 2:', app2.instanceId);
            console.log('Use window.debuggerApp1 and window.debuggerApp2 to access the instances');
        });
    </script>

    <style>
        body {
            background: #1e1e1e;
            color: #d4d4d4;
        }
        h1 {
            color: #569cd6;
            margin-bottom: 10px;
        }
        h2 {
            margin-top: 0;
            font-size: 16px;
        }
        p {
            color: #d4d4d4;
            margin-bottom: 20px;
        }
    </style>
</body>
</html>
